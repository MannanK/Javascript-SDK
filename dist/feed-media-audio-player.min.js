var Feed=function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var y=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),g=t(function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)}),c=(g.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),v=function(t){if(!c(t))throw TypeError(t+" is not an object!");return t},u=function(t){try{return!!t()}catch(t){return!0}},i=!u(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),e=y.document,n=c(e)&&c(e.createElement),r=function(t){return n?e.createElement(t):{}},o=!i&&!u(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}),s=function(t,e){if(!c(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!c(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!c(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!c(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},a=Object.defineProperty,l={f:i?Object.defineProperty:function(t,e,n){if(v(t),e=s(e,!0),v(n),o)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},S=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},k=i?function(t,e,n){return l.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},d={}.hasOwnProperty,f=function(t,e){return d.call(t,e)},p=0,h=Math.random(),m=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++p+h).toString(36))},w=t(function(t){var o=m("src"),e="toString",n=Function[e],s=(""+n).split(e);g.inspectSource=function(t){return n.call(t)},(t.exports=function(t,e,n,i){var r="function"==typeof n;r&&(f(n,"name")||k(n,"name",e)),t[e]!==n&&(r&&(f(n,o)||k(n,o,t[e]?""+t[e]:s.join(String(e)))),t===y?t[e]=n:i?t[e]?t[e]=n:k(t,e,n):(delete t[e],k(t,e,n)))})(Function.prototype,e,function(){return"function"==typeof this&&this[o]||n.call(this)})}),_=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},b=function(i,r,t){if(_(i),void 0===r)return i;switch(t){case 1:return function(t){return i.call(r,t)};case 2:return function(t,e){return i.call(r,t,e)};case 3:return function(t,e,n){return i.call(r,t,e,n)}}return function(){return i.apply(r,arguments)}},P="prototype",O=function(t,e,n){var i,r,o,s,a=t&O.F,u=t&O.G,c=t&O.S,l=t&O.P,d=t&O.B,f=u?y:c?y[e]||(y[e]={}):(y[e]||{})[P],p=u?g:g[e]||(g[e]={}),h=p[P]||(p[P]={});for(i in u&&(n=e),n)o=((r=!a&&f&&void 0!==f[i])?f:n)[i],s=d&&r?b(o,y):l&&"function"==typeof o?b(Function.call,o):o,f&&w(f,i,o,t&O.U),p[i]!=o&&k(p,i,s),l&&h[i]!=o&&(h[i]=o)};y.core=g,O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128;var x,E=O,A={}.toString,I=function(t){return A.call(t).slice(8,-1)},T=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==I(t)?t.split(""):Object(t)},j=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},C=function(t){return T(j(t))},L=Math.ceil,q=Math.floor,R=function(t){return isNaN(t=+t)?0:(0<t?q:L)(t)},M=Math.min,N=function(t){return 0<t?M(R(t),9007199254740991):0},B=Math.max,F=Math.min,D=t(function(t){var e="__core-js_shared__",n=y[e]||(y[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:g.version,mode:"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})}),U=D("keys"),V=function(t){return U[t]||(U[t]=m(t))},H=(x=!1,function(t,e,n){var i,r,o,s=C(t),a=N(s.length),u=(r=a,(i=R(i=n))<0?B(i+r,0):F(i,r));if(x&&e!=e){for(;u<a;)if((o=s[u++])!=o)return!0}else for(;u<a;u++)if((x||u in s)&&s[u]===e)return x||u||0;return!x&&-1}),W=V("IE_PROTO"),z=function(t,e){var n,i=C(t),r=0,o=[];for(n in i)n!=W&&f(i,n)&&o.push(n);for(;e.length>r;)f(i,n=e[r++])&&(~H(o,n)||o.push(n));return o},G="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),J=Object.keys||function(t){return z(t,G)},$={f:Object.getOwnPropertySymbols},K={f:{}.propertyIsEnumerable},Y=function(t){return Object(j(t))},Q=Object.assign,X=!Q||u(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=Q({},t)[n]||Object.keys(Q({},e)).join("")!=i})?function(t,e){for(var n=Y(t),i=arguments.length,r=1,o=$.f,s=K.f;r<i;)for(var a,u=T(arguments[r++]),c=o?J(u).concat(o(u)):J(u),l=c.length,d=0;d<l;)s.call(u,a=c[d++])&&(n[a]=u[a]);return n}:Q;E(E.S+E.F,"Object",{assign:X});var Z=!1,tt=function t(){var e,n=Array.prototype.slice.call(arguments);Z&&console.log.apply(console,n);try{e=JSON.stringify({ts:new Date,message:n[0],args:n.slice(1)})}catch(t){e=JSON.stringify({ts:new Date,message:n[0],args:"truncated"})}t.history.push(e),500<history.length&&t.history.shift()};tt.history=[],tt.enable=function(){Z=!0};var et,nt,it,rt,ot,st,at,ut=t(function(t){var e=D("wks"),n=y.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:m)("Symbol."+t))}).store=e}),ct=ut("match"),lt=function(t){var e;return c(t)&&(void 0!==(e=t[ct])?!!e:"RegExp"==I(t))};function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}nt=2,it=function(r,o,s){var p=lt,h=s,y=[].push,t="split",g="length",v="lastIndex";if("c"=="abbc"[t](/(b)*/)[1]||4!="test"[t](/(?:)/,-1)[g]||2!="ab"[t](/(?:ab)*/)[g]||4!="."[t](/(.?)(.?)/)[g]||1<"."[t](/()()/)[g]||""[t](/.?/)[g]){var m=void 0===/()??/.exec("")[1];s=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!p(t))return h.call(n,t,e);var i,r,o,s,a,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,d=void 0===e?4294967295:e>>>0,f=new RegExp(t.source,c+"g");for(m||(i=new RegExp("^"+f.source+"$(?!\\s)",c));(r=f.exec(n))&&!(l<(o=r.index+r[0][g])&&(u.push(n.slice(l,r.index)),!m&&1<r[g]&&r[0].replace(i,function(){for(a=1;a<arguments[g]-2;a++)void 0===arguments[a]&&(r[a]=void 0)}),1<r[g]&&r.index<n[g]&&y.apply(u,r.slice(1)),s=r[0][g],l=o,u[g]>=d));)f[v]===r.index&&f[v]++;return l===n[g]?!s&&f.test("")||u.push(""):u.push(n.slice(l)),u[g]>d?u.slice(0,d):u}}else"0"[t](void 0,0)[g]&&(s=function(t,e){return void 0===t&&0===e?[]:h.call(this,t,e)});return[function(t,e){var n=r(this),i=null==t?void 0:t[o];return void 0!==i?i.call(t,n,e):s.call(String(n),t,e)},s]},rt=ut(et="split"),ot=it(j,rt,""[et]),st=ot[0],at=ot[1],u(function(){var t={};return t[rt]=function(){return 7},7!=""[et](t)})&&(w(String.prototype,et,st),k(RegExp.prototype,rt,2==nt?function(t,e){return at.call(t,this,e)}:function(t){return at.call(t,this)}));var ft=ut("unscopables"),pt=Array.prototype;null==pt[ft]&&k(pt,ft,{});var ht=function(t){pt[ft][t]=!0},yt=function(t,e){return{value:e,done:!!t}},gt={},vt=i?Object.defineProperties:function(t,e){v(t);for(var n,i=J(e),r=i.length,o=0;o<r;)l.f(t,n=i[o++],e[n]);return t},mt=y.document,_t=mt&&mt.documentElement,bt=V("IE_PROTO"),Pt=function(){},St="prototype",kt=function(){var t,e=r("iframe"),n=G.length;for(e.style.display="none",_t.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),kt=t.F;n--;)delete kt[St][G[n]];return kt()},wt=Object.create||function(t,e){var n;return null!==t?(Pt[St]=v(t),n=new Pt,Pt[St]=null,n[bt]=t):n=kt(),void 0===e?n:vt(n,e)},Ot=l.f,xt=ut("toStringTag"),Et=function(t,e,n){t&&!f(t=n?t:t.prototype,xt)&&Ot(t,xt,{configurable:!0,value:e})},At={};k(At,ut("iterator"),function(){return this});var It=V("IE_PROTO"),Tt=Object.prototype,jt=Object.getPrototypeOf||function(t){return t=Y(t),f(t,It)?t[It]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Tt:null},Ct=ut("iterator"),Lt=!([].keys&&"next"in[].keys()),qt="values",Rt=function(){return this},Mt=function(t,e,n,i,r,o,s){var a,u,c;u=e,c=i,(a=n).prototype=wt(At,{next:S(1,c)}),Et(a,u+" Iterator");var l,d,f,p=function(t){if(!Lt&&t in v)return v[t];switch(t){case"keys":case qt:return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",y=r==qt,g=!1,v=t.prototype,m=v[Ct]||v["@@iterator"]||r&&v[r],_=m||p(r),b=r?y?p("entries"):_:void 0,P="Array"==e&&v.entries||m;if(P&&(f=jt(P.call(new t)))!==Object.prototype&&f.next&&(Et(f,h,!0),"function"!=typeof f[Ct]&&k(f,Ct,Rt)),y&&m&&m.name!==qt&&(g=!0,_=function(){return m.call(this)}),(Lt||g||!v[Ct])&&k(v,Ct,_),gt[e]=_,gt[h]=Rt,r)if(l={values:y?_:p(qt),keys:o?_:p("keys"),entries:b},s)for(d in l)d in v||w(v,d,l[d]);else E(E.P+E.F*(Lt||g),e,l);return l}(Array,"Array",function(t,e){this._t=C(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,yt(1)):yt(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");gt.Arguments=gt.Array,ht("keys"),ht("values"),ht("entries");for(var Nt=ut("iterator"),Bt=ut("toStringTag"),Ft=gt.Array,Dt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ut=J(Dt),Vt=0;Vt<Ut.length;Vt++){var Ht,Wt=Ut[Vt],zt=Dt[Wt],Gt=y[Wt],Jt=Gt&&Gt.prototype;if(Jt&&(Jt[Nt]||k(Jt,Nt,Ft),Jt[Bt]||k(Jt,Bt,Wt),gt[Wt]=Ft,zt))for(Ht in Mt)Jt[Ht]||w(Jt,Ht,Mt[Ht],!0)}var $t,Kt,Yt,Qt;$t="keys",Kt=function(){return function(t){return J(Y(t))}},Yt=(g.Object||{})[$t]||Object[$t],(Qt={})[$t]=Kt(Yt),E(E.S+E.F*u(function(){Yt(1)}),"Object",Qt);var Xt=l.f,Zt=Function.prototype,te=/^\s*function ([^ (]*)/;"name"in Zt||i&&Xt(Zt,"name",{configurable:!0,get:function(){try{return(""+this).match(te)[1]}catch(t){return""}}});var ee,ne,ie,re,oe,se,ae,ue,ce,le=Array.isArray||function(t){return"Array"==I(t)},de=ut("species"),fe=(ie=1==(ee=5),re=2==ee,oe=3==ee,se=4==ee,ae=6==ee,ue=5==ee||ae,ce=ne||function(t,e){return le(n=t)&&("function"!=typeof(i=n.constructor)||i!==Array&&!le(i.prototype)||(i=void 0),c(i)&&null===(i=i[de])&&(i=void 0)),new(void 0===i?Array:i)(e);var n,i},function(t,e,n){for(var i,r,o=Y(t),s=T(o),a=b(e,n,3),u=N(s.length),c=0,l=ie?ce(t,u):re?ce(t,0):void 0;c<u;c++)if((ue||c in s)&&(r=a(i=s[c],c,o),ee))if(ie)l[c]=r;else if(r)switch(ee){case 3:return!0;case 5:return i;case 6:return c;case 2:l.push(i)}else if(se)return!1;return ae?-1:oe||se?se:l}),pe="find",he=!0;pe in[]&&Array(1)[pe](function(){he=!1}),E(E.P+E.F*he,"Array",{find:function(t){return fe(this,t,1<arguments.length?arguments[1]:void 0)}}),ht(pe);var ye=Object.getOwnPropertyDescriptor,ge={f:i?ye:function(t,e){if(t=C(t),e=s(e,!0),o)try{return ye(t,e)}catch(t){}if(f(t,e))return S(!K.f.call(t,e),t[e])}},ve=function(t,e){if(v(t),!c(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},me={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,i){try{(i=b(Function.call,ge.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return ve(t,e),n?t.__proto__=e:i(t,e),t}}({},!1):void 0),check:ve}.set,_e=G.concat("length","prototype"),be={f:Object.getOwnPropertyNames||function(t){return z(t,_e)}},Pe=ut("species"),Se=function(t){var e=y[t];i&&e&&!e[Pe]&&l.f(e,Pe,{configurable:!0,get:function(){return this}})},ke=l.f,we=be.f,Oe=y.RegExp,xe=Oe,Ee=Oe.prototype,Ae=/a/g,Ie=/a/g,Te=new Oe(Ae)!==Ae;if(i&&(!Te||u(function(){return Ie[ut("match")]=!1,Oe(Ae)!=Ae||Oe(Ie)==Ie||"/a/i"!=Oe(Ae,"i")}))){Oe=function(t,e){var n,i,r,o,s=this instanceof Oe,a=lt(t),u=void 0===e;return!s&&a&&t.constructor===Oe&&u?t:(n=Te?new xe(a&&!u?t.source:t,e):xe((a=t instanceof Oe)?t.source:t,a&&u?function(){var t=v(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(t):e),i=Oe,(o=(s?this:Ee).constructor)!==i&&"function"==typeof o&&(r=o.prototype)!==i.prototype&&c(r)&&me&&me(n,r),n)};for(var je=function(e){e in Oe||ke(Oe,e,{configurable:!0,get:function(){return xe[e]},set:function(t){xe[e]=t}})},Ce=we(xe),Le=0;Ce.length>Le;)je(Ce[Le++]);(Ee.constructor=Oe).prototype=Ee,w(y,"RegExp",Oe)}function qe(t,e){return"//"===t.slice(0,2)&&(t=!0===e?"https:"+t:!1===e?"http:"+t:"http"===window.location.protocol.substr(0,4)?window.location.protocol+t:"http"),t}Se("RegExp");var Re=0;function Me(t){return t+ ++Re}var Ne=Array.prototype.indexOf;function Be(r,o,t,e){"function"==typeof o&&(e=t,t=o,o=!1);var n=t?r.map(t,e):r,s=[],a=[];return n.forEach(function(t,e){var n,i;(o?e&&a[a.length-1]===t:(i=t,null!=(n=a)&&(Ne&&n.indexOf===Ne?-1!=n.indexOf(i):n.some(function(t){return t===i}))))||(a.push(t),s.push(r[e]))}),s}function Fe(t,e){var n=e.map(function(t){return new RegExp(t)});return Be(t).filter(function(e){return n.find(function(t){return t.test(e)})})}for(var De=Array.prototype.slice,Ue={on:function(t,e,n){return He(this,"on",t,[e,n])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this})),this},once:function(t,e,n){if(!He(this,"once",t,[e,n])||!e)return this;var i,r,o,s=this,a=(o=!(i=function(){s.off(t,a),e.apply(this,arguments)}),function(){return o||(o=!0,r=i.apply(this,arguments),i=null),r});return a._callback=e,this.on(t,a,n)},off:function(t,e,n){var i,r,o,s,a,u,c,l;if(!this._events||!He(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=0,u=(s=t?[t]:Object.keys(this._events)).length;a<u;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=i=[],e||n)for(c=0,l=o.length;c<l;c++)r=o[c],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=De.call(arguments,1);if(!He(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&We(n,e),i&&We(i,arguments),this},stopListening:function(t,e,n){var i=this._listeners;if(!i)return this;var r=!e&&!n;for(var o in"object"===dt(e)&&(n=this),t&&((i={})[t._listenerId]=t),i)i[o].off(e,n,this),r&&delete this._listeners[o];return this}},Ve=/\s+/,He=function(t,e,n,i){if(!n)return!0;if("object"===dt(n)){for(var r in n)t[e].apply(t,[r,n[r]].concat(i));return!1}if(Ve.test(n)){for(var o=n.split(Ve),s=0,a=o.length;s<a;s++)t[e].apply(t,[o[s]].concat(i));return!1}return!0},We=function(t,e){var n,i=-1,r=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<r;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s);return;case 3:for(;++i<r;)(n=t[i]).callback.call(n.ctx,o,s,a);return;default:for(;++i<r;)(n=t[i]).callback.apply(n.ctx,e)}},ze={listenTo:"on",listenToOnce:"once"},Ge=Object.keys(ze),Je=function(){var t=Ge[$e],i=ze[t];Ue[t]=function(t,e,n){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=Me("l"))]=t,"object"===dt(e)&&(n=this),t[i](e,n,this),this}},$e=0;$e<Ge.length;$e++)Je();var Ke=/(iPhone|iPad)/i.test(navigator.userAgent),Ye=Ke&&/OS 13_[0123]/i.test(navigator.userAgent),Qe=Ke?"https://u9e9h7z5.map2.ssl.hwcdn.net/feedfm-audio/250-milliseconds-of-silence.mp3":"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",Xe=function(t,e,n,i){var r=Object.assign(this,Ue);if(r.id=n,r.url=i,r.speaker=t,r.loaded=!1,e){this.startPosition=+e.startPosition,this.endPosition=+e.endPosition,this.fadeInSeconds=+e.fadeInSeconds,this.fadeInSeconds?(this.fadeInStart=this.startPosition?this.startPosition/1e3:0,this.fadeInEnd=this.fadeInStart+this.fadeInSeconds):(this.fadeInStart=0,this.fadeInEnd=0),this.fadeOutSeconds=+e.fadeOutSeconds,this.fadeOutSeconds&&(this.endPosition?(this.fadeOutStart=this.endPosition/1e3-this.fadeOutSeconds,this.fadeOutEnd=this.endPosition/1e3):(this.fadeOutStart=0,this.fadeOutEnd=0));for(var o=["play","pause","finish","elapse"],s=0;s<o.length;s++){var a=o[s];a in e&&r.on(a,e[a])}this.gain=e.gain||0}else this.gain=0;return r};function Ze(t){return" src = "+t.src+", time = "+t.currentTime+", paused = "+t.paused+", duration = "+t.duration+", readyState = "+t.readyState}Xe.prototype={play:function(){return tt(this.id+" sound play"),this.speaker._playSound(this)},pause:function(){return tt(this.id+" sound pause"),this.speaker._pauseSound(this)},resume:function(){return tt(this.id+" sound resume"),this.speaker._playSound(this)},position:function(){return this.speaker._position(this)},duration:function(){return this.speaker._duration(this)},destroy:function(){tt(this.id+" being called to destroy"),this.speaker._destroySound(this)},gainAdjustedVolume:function(t){return this.gain?Math.max(Math.min(t/100*(50*Math.pow(10,this.gain/20)),100),0)/100:(tt("no volume adjustment"),t/100)}};var tn=function(){};tn.iOSp=Ke,tn.brokenWebkit=Ye,tn.prototype={vol:100,outstandingPlays:{},audioContext:null,active:null,fading:null,preparing:null,prepareWhenReady:null,initializeAudio:function(){null===this.active?(tt("initializing for mobile"),this.audioContext=function(){var t=window.AudioContext||window.webkitAudioContext,e=new t;if(44100!==e.sampleRate){var n=e.createBuffer(1,1,44100),i=e.createBufferSource();i.buffer=n,i.connect(e.destination),i.start(0),i.disconnect(),e.close(),e=new t}return e}(),this.active=this._createAudio(Qe),this.fading=this._createAudio(Qe),this.preparing=this._createAudio(this.prepareWhenReady?this.prepareWhenReady:Qe),this.prepareWhenReady=null):tt("mobile already initialized")},getSupportedFormats:function(){return document.createElement("audio").canPlayType("audio/aac")?"aac,mp3":"mp3"},_createAudioGainNode:function(t){var e=this.audioContext.createMediaElementSource(t),n=this.audioContext.createGain();return n.gain.value=1,e.connect(n),n.connect(this.audioContext.destination),n.gain},_createAudio:function(t){var e=new Audio(t);e.crossOrigin="anonymous",e.loop=!1,e.volume=1,this._addEventListeners(e);var n=null;return Ke&&!Ye&&(n=this._createAudioGainNode(e)),{audio:e,sound:null,gain:n,volume:1}},_addEventListeners:function(t){t.addEventListener("pause",this._onAudioPauseEvent.bind(this)),t.addEventListener("ended",this._onAudioEndedEvent.bind(this)),t.addEventListener("timeupdate",this._onAudioTimeUpdateEvent.bind(this))},_onAudioPauseEvent:function(t){var e=t.currentTarget;e.src!==Qe&&e===this.active.audio&&e.currentTime!==e.duration&&(this.active.sound&&this.active.sound.url===e.src?this.active.sound.trigger("pause"):tt("active audio pause, but no matching sound"))},_onAudioEndedEvent:function(t){var e=t.currentTarget;if(e.src!==Qe){if(e===this.fading.audio)return e.src=Qe,void(this.fading.sound=null);if(e===this.active.audio)if(this.active.sound&&this.active.sound.url===e.src){tt("active audio ended");var n=this.active.sound;this.active.sound=null,n.trigger("finish")}else tt("active audio ended, but no matching sound",e.src)}},_onAudioTimeUpdateEvent:function(t){var e=t.currentTarget;if(e.src!==Qe)if(e===this.fading.audio&&this.fading.sound)this.fading.sound.endPosition&&e.currentTime>=this.fading.sound.endPosition/1e3?(this.fading.sound=null,this.fading.audio.src=Qe):this._setVolume(this.fading);else if(e===this.active.audio)if(this.active.sound&&this.active.sound.url===e.src){if(this.active.sound.endPosition&&this.active.sound.endPosition/1e3<=e.currentTime){var n=this.active.sound;this.active.sound=null,this.active.audio.src=Qe,n.trigger("finish")}else if(this.active.sound.fadeOutEnd&&e.currentTime>=this.active.sound.fadeOutStart){this._setVolume(this.active);var i=this.fading;this.fading=this.active,this.active=i,this.active.sound=null,this.fading.sound.trigger("finish")}else this._setVolume(this.active),this.active.sound.trigger("elapse");this.prepareWhenReady&&this.prepare(this.prepareWhenReady)}else tt("active audio elapsed, but it no matching sound")},_setVolume:function(t,e){e||(e=t.sound);var n=t.audio.currentTime,i=t.volume,r=e.gainAdjustedVolume(this.vol);e.fadeInStart!=e.fadeInEnd&&n<e.fadeInStart?(r=0,tt("pre-fade-in volume is 0")):e.fadeInStart!=e.fadeInEnd&&n>=e.fadeInStart&&n<=e.fadeInEnd?(r=(n-e.fadeInStart)/(e.fadeInEnd-e.fadeInStart)*r,tt("ramping \u25b2 volume",{currentTime:n,currentVolume:i,calculatedVolume:r,sound:e})):e.fadeOutStart!=e.fadeOutEnd&&n>e.fadeOutEnd?(r=0,tt("post-fade-out volume is 0")):e.fadeOutStart!=e.fadeOutEnd&&n>=e.fadeOutStart&&n<=e.fadeOutEnd&&(r=(1-(n-e.fadeOutStart)/(e.fadeOutEnd-e.fadeOutStart))*r,tt("ramping \u25bc volume",{currentTime:n,currentVolume:i,calculatedVolume:r,sound:e})),i!=r&&(Ke?Ye||(t.gain.value=r):t.audio.volume=r,t.volume=r)},_debugAudioObject:function(t){for(var e=["abort","load","loadend","loadstart","loadeddata","loadedmetadata","canplay","canplaythrough","seeked","seeking","stalled","timeupdate","volumechange","waiting","durationchange","progress","emptied","ended","play","pause"],i=this,n=0;n<e.length;n++)t.addEventListener(e[n],function(t){var e=t.currentTarget,n=e===i.active.audio?"active":e===i.preparing.audio?"preparing":"fading";tt(n+": "+t.type),tt("    active: "+Ze(i.active.audio)),tt("    preparing: "+Ze(i.preparing.audio)),tt("    fading: "+Ze(i.fading.audio)),e.src})},create:function(t,e){var n=Me("feed-play-"),i=new Xe(this,e,n,t);return tt("created play "+n+" ("+t+")",e),this.outstandingPlays[i.id]=i,this.active&&this.active.audio?this._prepare(i.url,i.startPosition):this.prepareWhenReady=i.url,i},prepare:function(t){if(this.active&&this.active.audio){var e=this.active.audio.buffered;return 0<e.length&&e.end(e.length-1)>=this.active.audio.duration?this._prepare(t,0):this.active.audio.url===Qe?this._prepare(t,0):void(this.prepareWhenReady=t)}this.prepareWhenReady=t},_prepare:function(t,e){this.prepareWhenReady=null,this.preparing.audio.src!==t&&(tt("preparing "+t),this.preparing.audio.src=t),e&&this.preparing.audio.currentTime!==e&&(tt("advancing preparing audio to",e/1e3),this.preparing.audio.currentTime=e/1e3)},_playSound:function(e){var n=this;if(this.active.audio)if(this.active.sound===e)this.active.audio.paused?(tt(e.id+" was paused, so resuming"),this.active.audio.play().then(function(){tt("resumed playback"),e.trigger("play")}).catch(function(){tt("error resuming playback"),n.active.sound=null,e.trigger("finish")}),this.fading.sound&&this.fading.audio.play().then(function(){tt("resumed fading playback")}).catch(function(){tt("error resuming fading playback"),n.fading.sound=null,n.fading.audio.src=Qe})):tt(e.id+" is already playing");else{this.preparing.audio.src!==e.url&&this._prepare(e.url,e.startPosition);var t=this.active;if(this.active=this.preparing,this.preparing=t,this.active.sound=null,this._setVolume(this.active,e),this.preparing.audio.src=Qe,this.preparing.sound){var i=this.preparing.sound;this.preparing.sound=null,i.trigger("finish")}tt(e.id+" starting"),this.active.audio.play().then(function(){tt("success starting playback"),(n.active.sound=e).fadeOutSeconds&&0===e.fadeOutEnd&&(e.fadeOutStart=n.active.audio.duration-e.fadeOutSeconds,e.fadeOutEnd=n.active.audio.duration),e.startPosition&&(tt("updating start position"),n.active.audio.currentTime=e.startPosition/1e3,tt("updated"));var t=n.active.audio.paused;e.trigger("play"),t&&e.trigger("pause")}).catch(function(t){tt("error starting playback",t),e.trigger("finish",t)})}else console.error("**** player.initializeAudio() *** not called")},_destroySound:function(t){tt("want to destroy, and current is",t,this.active.sound),t.off(),this.active.sound===t&&(tt("destroy triggered for current sound",t.id),this.active.audio.pause()),delete this.outstandingPlays[this.id]},_pauseSound:function(t){null!=t&&t!==this.active.sound||(this.active.audio.pause(),this.fading.sound&&this.fading.audio.pause())},_position:function(t){return t===this.active.sound?(t.url!==this.active.audio.src&&tt("trying to get current song position, but it is not in the active audio player"),Math.floor(1e3*this.active.audio.currentTime)):0},_duration:function(t){if(t!==this.active.sound)return 0;t.url!==this.active.audio.src&&tt("trying to get current song duration, but it is not in the active audio player");var e=this.active.audio.duration;return isNaN(e)?0:Math.floor(1e3*e)},setVolume:function(t){return void 0!==t&&(this.vol=t,this.active&&this.active.sound&&this._setVolume(this.active),this.trigger("volume",t)),this.vol}},Object.assign(tn.prototype,Ue);var en,nn,rn,on="1.99.11",sn=ut("toStringTag"),an="Arguments"==I(function(){return arguments}()),un=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),sn))?n:an?I(e):"Object"==(i=I(e))&&"function"==typeof e.callee?"Arguments":i},cn=function(e,t,n,i){try{return i?t(v(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&v(r.call(e)),t}},ln=ut("iterator"),dn=Array.prototype,fn=ut("iterator"),pn=g.getIteratorMethod=function(t){if(null!=t)return t[fn]||t["@@iterator"]||gt[un(t)]},hn=t(function(t){var p={},h={},e=t.exports=function(t,e,n,i,r){var o,s,a,u,c,l=r?function(){return t}:pn(t),d=b(n,i,e?2:1),f=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(void 0===(c=l)||gt.Array!==c&&dn[ln]!==c){for(a=l.call(t);!(s=a.next()).done;)if((u=cn(a,d,s.value,e))===p||u===h)return u}else for(o=N(t.length);f<o;f++)if((u=e?d(v(s=t[f])[0],s[1]):d(t[f]))===p||u===h)return u};e.BREAK=p,e.RETURN=h}),yn=ut("species"),gn=function(t,e){var n,i=v(t).constructor;return void 0===i||null==(n=v(i)[yn])?e:_(n)},vn=y.process,mn=y.setImmediate,_n=y.clearImmediate,bn=y.MessageChannel,Pn=y.Dispatch,Sn=0,kn={},wn="onreadystatechange",On=function(){var t=+this;if(kn.hasOwnProperty(t)){var e=kn[t];delete kn[t],e()}},xn=function(t){On.call(t.data)};mn&&_n||(mn=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return kn[++Sn]=function(){!function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},en(Sn),Sn},_n=function(t){delete kn[t]},"process"==I(vn)?en=function(t){vn.nextTick(b(On,t,1))}:Pn&&Pn.now?en=function(t){Pn.now(b(On,t,1))}:bn?(rn=(nn=new bn).port2,nn.port1.onmessage=xn,en=b(rn.postMessage,rn,1)):y.addEventListener&&"function"==typeof postMessage&&!y.importScripts?(en=function(t){y.postMessage(t+"","*")},y.addEventListener("message",xn,!1)):en=wn in r("script")?function(t){_t.appendChild(r("script"))[wn]=function(){_t.removeChild(this),On.call(t)}}:function(t){setTimeout(b(On,t,1),0)});var En={set:mn,clear:_n},An=En.set,In=y.MutationObserver||y.WebKitMutationObserver,Tn=y.process,jn=y.Promise,Cn="process"==I(Tn);function Ln(t){var n,i;this.promise=new t(function(t,e){if(void 0!==n||void 0!==i)throw TypeError("Bad Promise constructor");n=t,i=e}),this.resolve=_(n),this.reject=_(i)}var qn={f:function(t){return new Ln(t)}},Rn=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},Mn=y.navigator,Nn=Mn&&Mn.userAgent||"",Bn=function(t,e){if(v(t),c(e)&&e.constructor===t)return e;var n=qn.f(t);return(0,n.resolve)(e),n.promise},Fn=ut("iterator"),Dn=!1;try{var Un=[7][Fn]();Un.return=function(){Dn=!0},Array.from(Un,function(){throw 2})}catch(t){}var Vn,Hn,Wn,zn,Gn=En.set,Jn=function(){var n,i,r,t=function(){var t,e;for(Cn&&(t=Tn.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?r():i=void 0,t}}i=void 0,t&&t.enter()};if(Cn)r=function(){Tn.nextTick(t)};else if(!In||y.navigator&&y.navigator.standalone)if(jn&&jn.resolve){var e=jn.resolve(void 0);r=function(){e.then(t)}}else r=function(){An.call(y,t)};else{var o=!0,s=document.createTextNode("");new In(t).observe(s,{characterData:!0}),r=function(){s.data=o=!o}}return function(t){var e={fn:t,next:void 0};i&&(i.next=e),n||(n=e,r()),i=e}}(),$n="Promise",Kn=y.TypeError,Yn=y.process,Qn=Yn&&Yn.versions,Xn=Qn&&Qn.v8||"",Zn=y[$n],ti="process"==un(Yn),ei=function(){},ni=Hn=qn.f,ii=!!function(){try{var t=Zn.resolve(1),e=(t.constructor={})[ut("species")]=function(t){t(ei,ei)};return(ti||"function"==typeof PromiseRejectionEvent)&&t.then(ei)instanceof e&&0!==Xn.indexOf("6.6")&&-1===Nn.indexOf("Chrome/66")}catch(t){}}(),ri=function(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e},oi=function(l,n){if(!l._n){l._n=!0;var i=l._c;Jn(function(){for(var u=l._v,c=1==l._s,t=0,e=function(t){var e,n,i,r=c?t.ok:t.fail,o=t.resolve,s=t.reject,a=t.domain;try{r?(c||(2==l._h&&ui(l),l._h=1),!0===r?e=u:(a&&a.enter(),e=r(u),a&&(a.exit(),i=!0)),e===t.promise?s(Kn("Promise-chain cycle")):(n=ri(e))?n.call(e,o,s):o(e)):s(u)}catch(t){a&&!i&&a.exit(),s(t)}};i.length>t;)e(i[t++]);l._c=[],l._n=!1,n&&!l._h&&si(l)})}},si=function(o){Gn.call(y,function(){var t,e,n,i=o._v,r=ai(o);if(r&&(t=Rn(function(){ti?Yn.emit("unhandledRejection",i,o):(e=y.onunhandledrejection)?e({promise:o,reason:i}):(n=y.console)&&n.error&&n.error("Unhandled promise rejection",i)}),o._h=ti||ai(o)?2:1),o._a=void 0,r&&t.e)throw t.v})},ai=function(t){return 1!==t._h&&0===(t._a||t._c).length},ui=function(e){Gn.call(y,function(){var t;ti?Yn.emit("rejectionHandled",e):(t=y.onrejectionhandled)&&t({promise:e,reason:e._v})})},ci=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),oi(e,!0))},li=function(t){var n,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw Kn("Promise can't be resolved itself");(n=ri(t))?Jn(function(){var e={_w:i,_d:!1};try{n.call(t,b(li,e,1),b(ci,e,1))}catch(t){ci.call(e,t)}}):(i._v=t,i._s=1,oi(i,!1))}catch(t){ci.call({_w:i,_d:!1},t)}}};ii||(Zn=function(t){!function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!")}(this,Zn,$n,"_h"),_(t),Vn.call(this);try{t(b(li,this,1),b(ci,this,1))}catch(t){ci.call(this,t)}},(Vn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var i in e)w(t,i,e[i],n);return t}(Zn.prototype,{then:function(t,e){var n=ni(gn(this,Zn));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=ti?Yn.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&oi(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Wn=function(){var t=new Vn;this.promise=t,this.resolve=b(li,t,1),this.reject=b(ci,t,1)},qn.f=ni=function(t){return t===Zn||t===zn?new Wn(t):Hn(t)}),E(E.G+E.W+E.F*!ii,{Promise:Zn}),Et(Zn,$n),Se($n),zn=g[$n],E(E.S+E.F*!ii,$n,{reject:function(t){var e=ni(this);return(0,e.reject)(t),e.promise}}),E(E.S+E.F*!ii,$n,{resolve:function(t){return Bn(this,t)}}),E(E.S+E.F*!(ii&&function(t,e){if(!e&&!Dn)return!1;var n=!1;try{var i=[7],r=i[Fn]();r.next=function(){return{done:n=!0}},i[Fn]=function(){return r},t(i)}catch(t){}return n}(function(t){Zn.all(t).catch(ei)})),$n,{all:function(t){var s=this,e=ni(s),a=e.resolve,u=e.reject,n=Rn(function(){var i=[],r=0,o=1;hn(t,!1,function(t){var e=r++,n=!1;i.push(void 0),o++,s.resolve(t).then(function(t){n||(n=!0,i[e]=t,--o||a(i))},u)}),--o||a(i)});return n.e&&u(n.v),e.promise},race:function(t){var e=this,n=ni(e),i=n.reject,r=Rn(function(){hn(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}}),E(E.P+E.R,"Promise",{finally:function(e){var n=gn(this,g.Promise||y.Promise),t="function"==typeof e;return this.then(t?function(t){return Bn(n,e()).then(function(){return t})}:e,t?function(t){return Bn(n,e()).then(function(){throw t})}:e)}});var di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function fi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pi(t){var e=t.charAt(t.length-1),n=parseInt(t,10),i=new Date;switch(e){case"Y":i.setFullYear(i.getFullYear()+n);break;case"M":i.setMonth(i.getMonth()+n);break;case"D":i.setDate(i.getDate()+n);break;case"h":i.setHours(i.getHours()+n);break;case"m":i.setMinutes(i.getMinutes()+n);break;case"s":i.setSeconds(i.getSeconds()+n);break;default:i=new Date(t)}return i}var hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function yi(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:encodeURIComponent,i=arguments[3];"object"===(void 0===n?"undefined":hi(n))&&null!==n&&(i=n,n=encodeURIComponent);var r=function(t){var e="";for(var n in t)if(fi(t,n))if(/^expires$/i.test(n)){var i=t[n];"object"!==(void 0===i?"undefined":di(i))&&(i=pi(i+="number"==typeof i?"D":"")),e+=";"+n+"="+i.toUTCString()}else/^secure$/.test(n)?t[n]&&(e+=";"+n):e+=";"+n+"="+t[n];return fi(t,"path")||(e+=";path=/"),e}(i||{}),o=t+"="+("function"==typeof n?n(e):e)+r;document.cookie=o}var gi=function(t,e,n){n=n||{},this.config={baseUrl:qe(n.baseUrl||"//feed.fm",!0),formats:"mp3,aac",maxBitrate:128,timeOffset:0,current:null,pendingRequest:null,pendingPlay:null},Object.assign(this,Ue),t&&e&&this.setCredentials(t,e)};function vi(t,e,n){e<(t=t?2*t:200)&&(t=e),setTimeout(function(){n(t)},t)}gi.prototype.setBaseUrl=function(t){this.config.baseUrl=qe(t)},gi.prototype.setCredentials=function(t,e){this.config.token=t,this.config.secret=e},gi.prototype.setPlacementId=function(t){this.config.placementId=t,this.trigger("placement-changed",t),this._retune()},gi.prototype.setStationId=function(t){this.config.stationId!=t&&(this.config.stationId=t,this.trigger("station-changed",t),this._retune())},gi.prototype.setFormats=function(t){this.config.formats=t,this._retune()},gi.prototype.setMaxBitrate=function(t){this.config.maxBitrate=t},gi.prototype.tune=function(){if(!this.config.token)throw new Error("no token set with setCredentials()");if(!this.config.secret)throw new Error("no secret set with setCredentials()");this.config.pendingRequest=null,this.config.pendingPlay=null,this._assignCurrentPlay(null,!0),this._getDefaultPlacementInformation()},gi.prototype._getDefaultPlacementInformation=function(e){var n=this,i=this;this.config.placementId&&this.config.placement&&this.config.placement.id===this.config.placementId?this._requestNextPlay():this._getClientId().then(function(t){tt("requesting default placement information from server"),i._signedAjax(n.config.baseUrl+"/api/v2/placement?client_id="+t).then(function(t){return t.json()}).then(i._receiveDefaultPlacementInformation.bind(i)).catch(i._failedDefaultPlacementInformation.bind(i,e))})},gi.prototype._receiveDefaultPlacementInformation=function(t){t&&t.success&&t.placement&&(this.config.placement=t.placement,this.config.stations=t.stations,this.config.placementId=t.placement.id,this.trigger("placement-changed",this.config.placementId),this.trigger("placement",t.placement),!("stationId"in this.config)&&0<t.stations.length&&(this.config.stationId=t.stations[0].id,this.trigger("station-changed",this.config.stationId)),this.trigger("stations",t.stations),this._requestNextPlay())},gi.prototype._failedDefaultPlacementInformation=function(t,e){var n=this;if(401===e.status)try{var i=JSON.parse(e.responseText);if(i.error&&5===i.error.code)return void this.trigger("invalid-credentials")}catch(t){}else console.warn("error from placement request",e);t=t?2*t:500,setTimeout(function(){n._getDefaultPlacementInformation(t)},t)},gi.prototype.getActivePlacement=function(){return this.config.placement?this.config.placement:null},gi.prototype.getActivePlay=function(){return this.config.current?this.config.current.play:null},gi.prototype.isTuned=function(){return this.config.current||this.config.pendingRequest},gi.prototype.hasActivePlayStarted=function(){return this.config.current&&this.config.current.started},gi.prototype._retune=function(){this.isTuned()&&this.tune()},gi.prototype.reportPlayStarted=function(){if(!this.config.current)throw new Error("attempt to report a play started, but there is no active play");this._startPlay(this.config.current.play)},gi.prototype.reportPlayElapsed=function(t){if(!this.config.current)throw new Error("attempt to report elapsed play time, but the play hasn't started");this._signedAjax(this.config.baseUrl+"/api/v2/play/"+this.config.current.play.id+"/elapse",{method:"POST",body:JSON.stringify({seconds:t}),headers:{"Content-Type":"application/json"}})},gi.prototype.reportPlayCompleted=function(){if(!this.config.current||!this.config.current.started)throw tt("finish on non-active or playing song"),new Error("no active or playing song");this._signedAjax(this.config.baseUrl+"/api/v2/play/"+this.config.current.play.id+"/complete",{method:"POST"}).finally(this._receivePlayCompleted.bind(this))},gi.prototype._receivePlayCompleted=function(){if(this.config.pendingRequest)tt("song finished, but we're still waiting for next one to return"),this._assignCurrentPlay(null,!0);else{tt("song finished, and no outstanding request, so playing pendingPlay");var t=this.config.pendingPlay;this.config.pendingPlay=null,this._assignCurrentPlay(t)}},gi.prototype.requestSkip=function(){if(!this.config.current)throw new Error("No song being played");if(!this.config.current.started)throw new Error("No song has been started");this.config.current.canSkip?this._signedAjax(this.config.baseUrl+"/api/v2/play/"+this.config.current.play.id+"/skip",{method:"POST"}).then(function(t){return t.json()}).then(this._receiveSkip.bind(this,this.config.current.play)).catch(this._failSkip.bind(this,this.config.current.play)):this.trigger("skip-denied")},gi.prototype.requestInvalidate=function(){if(!this.config.current)throw new Error("No active song to invalidate!");this._sendInvalidate(this.config.current.play)},gi.prototype._sendInvalidate=function(t,e){this._signedAjax(this.config.baseUrl+"/api/v2/play/"+t.id+"/invalidate",{method:"POST"}).then(function(t){return t.json()}).then(this._receiveInvalidate.bind(this,t)).catch(this._failInvalidate.bind(this,e,t))},gi.prototype._failInvalidate=function(t,e,n){var i=this;(t=t?2*t:200)<3e3?setTimeout(function(){i._sendInvalidate(e)},t):tt("gave up trying to invalidate play",n)},gi.prototype._receiveInvalidate=function(t,e){tt("invalidate response");var n=this;if(this._submitLogHistory(),setTimeout(function(){tt("5 second follow up after invalidate"),n._submitLogHistory()},5e3),this.config.current&&this.config.current.play===t)if(e.success)if(this.config.pendingPlay){tt("invalidating to song already queued up");var i=this.config.pendingPlay;this.config.pendingPlay=null,this._assignCurrentPlay(i)}else tt("invalidating current song"),this._assignCurrentPlay(null,!0),this.config.pendingRequest||(tt("queueing up new song"),this._requestNextPlay());else tt("failed invalidate! - technically this is impossible")},gi.prototype._failSkip=function(t){this.config.current&&this.config.current.play===t&&this.trigger("skip-denied")},gi.prototype._receiveSkip=function(t,e){if(this.config.current&&this.config.current.play===t){if(!e.success)return tt("failed skip!"),void this.trigger("skip-denied");if(this.config.pendingPlay){tt("skipping to song already queued up");var n=this.config.pendingPlay;this.config.pendingPlay=null,this._assignCurrentPlay(n)}else this.config.pendingRequest?(tt("skipping to what is queued up"),this._assignCurrentPlay(null,!0)):(tt("skipping to what is queued up"),this._assignCurrentPlay(null))}},gi.prototype._startPlay=function(t){2<this.config.current.retryCount?this._receiveStartPlay(t,{success:!0,can_skip:!0}):(tt("telling server we're starting the play",t),this._signedAjax(this.config.baseUrl+"/api/v2/play/"+t.id+"/start",{method:"POST"}).then(function(t){return t.json()}).then(this._receiveStartPlay.bind(this,t)).catch(this._failStartPlay.bind(this,t)))},gi.prototype._receiveStartPlay=function(t,e){e.success?this.config.current&&this.config.current.play===t?(this.config.current.canSkip=e.can_skip,this.config.current.started=!0,this.trigger("play-started",t),this._requestNextPlay()):tt("received start play, but not waiting any more"):tt("received failed start success")},gi.prototype._failStartPlay=function(t,e){var n=this,i=this;if(tt("start failed",e),this._submitLogHistory(),setTimeout(function(){tt("5 second follow up after start failure"),i._submitLogHistory()},5e3),this.config.current&&this.config.current.play===t){if(403===e.status)try{var r=JSON.parse(e.responseText);if(r.error&&20===r.error.code)return this._receiveStartPlay(t,{success:!0,can_skip:!0})}catch(t){tt("unable to parse start play response",t.message)}tt("request failed - trying again in 1 second",e),this.config.current.retryCount++,setTimeout(function(){n._startPlay(t)})}else tt("startPlay failed, but we don't care any more")},gi.prototype._assignCurrentPlay=function(t,e){this.config.current&&(this.trigger("play-completed",this.config.current.play),this.config.current=null),null===t?e?tt("nothing to play... waiting"):(tt("nothing to play from the current station"),this.trigger("plays-exhausted")):(this.config.current={play:t,canSkip:!1,started:!1,retryCount:0},tt("activated new song"),this.trigger("play-active",t))},gi.prototype._requestNextPlay=function(n){var i=this;this._getClientId().then(function(){if(i.config.pendingRequest)return n?6e4<n?(tt("giving up on retrieving next play"),void((i.config.pendingRequest=null)==i.config.current&&i._assignCurrentPlay(null))):(tt("retrying pending request"),i.config.pendingRequest.retryCount++,void i._signedAjax(i.config.pendingRequest.url,i.config.pendingRequest.ajax).then(function(t){return t.json()}).then(i._receiveNextPlay.bind(i,i.config.pendingRequest.ajax)).catch(i._failedNextPlay.bind(i,n,i.config.pendingRequest.ajax))):void tt("already waiting for a request to finish");var t={formats:i.config.formats,client_id:i.config.clientId,max_bitrate:i.config.maxBitrate,secure:!0};i.config.placementId&&(t.placement_id=i.config.placementId),i.config.stationId&&(t.station_id=i.config.stationId);var e={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};i.config.pendingRequest={url:i.config.baseUrl+"/api/v2/play",ajax:e,retryCount:0},tt("requesting new play from server",e),i._signedAjax(i.config.baseUrl+"/api/v2/play",e).then(function(t){return t.json()}).then(i._receiveNextPlay.bind(i,e)).catch(i._failedNextPlay.bind(i,n,e))})},gi.prototype._receiveNextPlay=function(t,e){this.config.pendingRequest&&this.config.pendingRequest.ajax===t?(this.config.pendingRequest=null,e.success?(this.trigger("prepare-sound",e.play.audio_file.url),this.config.current?(tt("received play, but we're already playing, so queueing up",e.play),this.config.pendingPlay=e.play):(tt("received play and no current song, making active now",e.play),this._assignCurrentPlay(e.play))):e.error&&9===e.error.code?this.config.current?(tt("ran out of music to play, but we're already playing"),this.config.pendingPlay=null):(tt("ran out of music, and nothing playing now"),this.trigger("plays-exhausted")):tt("unsuccessful response",e)):tt("nextPlay succeeded, but we don't care")},gi.prototype._failedNextPlay=function(t,e,n){var i=this;if(tt("next play failed",n),this._submitLogHistory(),setTimeout(function(){tt("5 second follow up after next play failure"),self._submitLogHistory()},5e3),this.config.pendingRequest&&this.config.pendingRequest.ajax===e){if(403===n.status)try{var r=JSON.parse(n.responseText);if(r.error&&19===r.error.code)return void this.trigger("not-in-us",r.error.message)}catch(t){tt("problem parsing 403 response",t.message)}tt("request failed - trying again",n.status),t=t?2*t:500,setTimeout(function(){i._requestNextPlay(t)},t)}else tt("nextPlay failed, but we don't care")},gi.prototype._getClientId=function(){var n=this;return this.clientPromise||(this.clientPromise=new Promise(function(e){n._requestClientId(function(t){n.config.clientId=t,n._setStoredCid(n.config.clientId),e(t)})})),this.clientPromise},gi.prototype._requestClientId=function(n,i){var t=this._getStoredCid();if(t)return n(t);var r=this;this._signedAjax(r.config.baseUrl+"/api/v2/client",{method:"POST"}).then(function(t){return t.json()}).then(function(t){t.success?n(t.client_id):vi(i,2e3,function(t){r._requestClientId(n,t)})}).catch(function(t){if(403===t.status)try{var e=JSON.parse(t.responseText);if(e.error&&19===e.error.code)return void r.trigger("not-in-us",e.error.message)}catch(t){tt("unknown response for client id request",t.message)}else tt("unknown client id response status",t.status);vi(i,2e3,function(t){r._requestClientId(n,t)})})},gi.prototype.maybeCanSkip=function(){return this.config.current&&this.config.current.started&&this.config.current.canSkip},gi.prototype.likePlay=function(t){this._signedAjax(this.config.baseUrl+"/api/v2/play/"+t+"/like",{method:"POST"}),this.config.current&&this.config.current.play.id===t&&(this.config.current.play.liked=!0)},gi.prototype.unlikePlay=function(t){this._signedAjax(this.config.baseUrl+"/api/v2/play/"+t+"/like",{method:"DELETE"}),this.config.current&&this.config.current.play.id===t&&delete this.config.current.play.liked},gi.prototype.dislikePlay=function(t){this._signedAjax(this.config.baseUrl+"/api/v2/play/"+t+"/dislike",{method:"POST"}),this.config.current&&this.config.current.play.id===t&&(this.config.current.play.liked=!1)},gi.prototype.suspend=function(t){var e={};return this.config.placementId&&(e.placementId=this.config.placementId),this.config.stationId&&(e.stationId=this.config.stationId),this.config.current&&this.config.current.started&&(e.placement=this.config.placement,e.stations=this.config.stations,e.play=function(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,n,i;e=r,i=o[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i})}return r}({},this.config.current.play),e.play.startPosition=t,e.canSkip=this.config.current.canSkip),e},gi.prototype.unsuspend=function(t){if(this.getActivePlay())throw new Error("You cannot unsuspend after running tune()");return"placementId"in t&&(this.config.placementId=t.placementId,this.trigger("placement-changed",this.config.placementId)),"stationId"in t&&(this.config.stationId=t.stationId,this.trigger("station-changed",this.config.stationId)),"play"in t?(this.config.placement=t.placement,this.config.stations=t.stations,this.trigger("placement",this.config.placement),this.trigger("stations",this.config.stations),this._assignCurrentPlay(t.play),this._receiveStartPlay(t.play,{success:!0,can_skip:t.canSkip}),t.play):(this.tune(),null)};function mi(){try{return"localStorage"in window&&null!==window.localStorage&&(window.localStorage["feed-test"]=!0)}catch(t){return!1}}gi.prototype._getStoredCid=function(){return function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:decodeURIComponent;if("string"!=typeof t||!t)return null;var n=new RegExp("(?:^|; )"+t.replace(/[.*+?^$|[\](){}\\-]/g,"\\$&")+"(?:=([^;]*))?(?:;|$)").exec(document.cookie);return null===n?null:"function"==typeof e?e(n[1]):n[1]}("cid")},gi.prototype._setStoredCid=function(t){yi("cid",t,{expires:3650,path:"/"})},gi.prototype._deleteStoredCid=function(){var t,e,n;t="cid",n={expires:-1},e&&e.domain&&(n.domain=e.domain),yi(t,"a",n)},gi.prototype._sign=function(t){var e;if(t||(t={}),e="Basic "+btoa(this.config.token+":"+this.config.secret),t.headers?t.headers.Authorization=e:t.headers={Authorization:e},t.headers["X-Feed-SDK"]=on,this.extraHeaders)for(var n in this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&(t.headers[n]=this.extraHeaders[n]);return t},gi.prototype._signedAjax=function(t,e){return this._ajax(t,this._sign(e))},gi.prototype._ajax=function(t,e){return fetch(t,e)},gi.prototype._submitLogHistory=function(){var t=tt.history;return tt.history=[],this._signedAjax("https://feed.fm/api/v2/session/event",{method:"POST",body:JSON.stringify({event:"playerHistory",parameters:t}),headers:{"Content-Type":"application/json"}})};var _i=function(t,e,n){this.state={paused:!0},(n=n||{}).debug&&tt.enable(),this.trimming=n.trimming||!1,this.normalizeVolume=n.normalizeVolume||!0,this.secondsOfCrossfade=n.secondsOfCrossfade||0,this.crossfadeIn=n.crossfadeIn||!1,Object.assign(this,Ue);var i=this.session=new gi(t,e,n);this.session.on("play-active",this._onPlayActive,this),this.session.on("play-started",this._onPlayStarted,this),this.session.on("play-completed",this._onPlayCompleted,this),this.session.on("plays-exhausted",this._onPlaysExhausted,this),this.session.on("prepare-sound",this._onPrepareSound,this),this.session.on("all",function(){this.trigger.apply(this,Array.prototype.slice.call(arguments,0))},this);var r=this.speaker=new tn;if(n.brokenWebkitFormats&&tn.brokenWebkit){var o=n.brokenWebkitFormats.split(","),s=r.getSupportedFormats().split(","),a=Fe(o,s),u=a.join(",");tt("input format list is",o,s),tt("final support list is",u),0===a.length&&(u=r.getSupportedFormats()),i.setFormats(u)}else if(n.formats){var c=n.formats.split(","),l=r.getSupportedFormats().split(","),d=Fe(c,l),f=d.join(",");0===d.length&&(f=r.getSupportedFormats()),tt("input format list is",c,l),tt("final support list is",f),i.setFormats(f)}else i.setFormats(r.getSupportedFormats());this.setMuted(this.isMuted())};_i.prototype.initializeAudio=function(){this.speaker.initializeAudio()},_i.prototype.setPlacementId=function(t){this.session.setPlacementId(t)},_i.prototype.setStationId=function(t){this.session.setStationId(t)},_i.prototype.setBaseUrl=function(t){this.session.setBaseUrl(t)},_i.prototype._onPlayActive=function(t){var e={play:this._onSoundPlay.bind(this,t.id),pause:this._onSoundPause.bind(this,t.id),finish:this._onSoundFinish.bind(this,t.id),elapse:this._onSoundElapse.bind(this,t.id)};this.normalizeVolume&&(e.gain=(t.audio_file.replaygain_track_gain||0)+(t.station.pre_gain||0)),this.trimming&&t.audio_file.extra&&t.audio_file.extra.trim_start&&(e.startPosition=1e3*t.audio_file.extra.trim_start),this.trimming&&t.audio_file.extra&&t.audio_file.extra.trim_end&&t.audio_file.duration_in_seconds&&(e.endPosition=1e3*(t.audio_file.duration_in_seconds-t.audio_file.extra.trim_end)),this.secondsOfCrossfade&&(this.crossfadeIn&&(e.fadeInSeconds=this.secondsOfCrossfade),e.fadeOutSeconds=this.secondsOfCrossfade);var n=this.speaker.create(t.audio_file.url,e);(this.state.activePlay={id:t.id,sound:n,startReportedToServer:!1,soundCompleted:!1,playStarted:!1,previousPosition:0},this.state.paused)||this.state.activePlay.sound.play()},_i.prototype._onSoundPlay=function(t){if(this.state.activePlay&&this.state.activePlay.id===t){if(this.state.paused=!1,this.state.activePlay.playStarted=!0,!this.state.activePlay.startReportedToServer)return this.session.reportPlayStarted();this.trigger("play-resumed",this.session.getActivePlay())}else tt("received sound play, but active play does not match",this.state.activePlay,t)},_i.prototype.getActivePlay=function(){return this.session.getActivePlay()},_i.prototype.hasActivePlayStarted=function(){return this.session.hasActivePlayStarted()},_i.prototype.getActivePlacement=function(){return this.session.getActivePlacement()},_i.prototype._onSoundPause=function(t){this.state.activePlay&&this.state.activePlay.id===t?(this.state.paused=!0,this.trigger("play-paused",this.session.getActivePlay())):tt("received sound pause, but active play does not match",this.state.activePlay,t)},_i.prototype._onSoundFinish=function(t,e){this.state.activePlay&&this.state.activePlay.id===t?(this.state.activePlay.soundCompleted=!0,e&&(this.state.activePlay.soundCompletedWithError=!0),this.state.activePlay.playStarted?this.state.activePlay.startReportedToServer&&(e?(tt("song completed with error - marking as invalid"),this.session.requestInvalidate()):this.session.reportPlayCompleted()):this.session.requestInvalidate()):tt("received sound finish, but active play does not match",this.state.activePlay,t)},_i.prototype._onSoundElapse=function(t){if(this.state.activePlay&&this.state.activePlay.id===t){var e=this.state.activePlay.sound.position(),n=Math.floor(this.state.activePlay.previousPosition/3e4),i=Math.floor(e/3e4);this.state.activePlay.previousPosition=e,i!==n&&this.session.reportPlayElapsed(Math.floor(e/1e3))}else tt("received sound elapse, but active play does not match",this.state.activePlay,t)},_i.prototype._onPlayStarted=function(t){var e=this.session;this.state.activePlay&&this.state.activePlay.id===t.id?(this.state.activePlay.startReportedToServer=!0,this.state.activePlay.soundCompleted&&(tt("sound completed before we finished reporting start",this.state.activePlay),this.state.activePlay.soundCompletedWithError?setTimeout(function(){return e.requestInvalidate()},1):setTimeout(function(){return e.reportPlayCompleted()},1))):tt("received play started, but it does not match active play",t,this.state.activePlay)},_i.prototype._onPlayCompleted=function(t){this.state.activePlay&&this.state.activePlay.id===t.id?(this.state.activePlay.sound.destroy(),delete this.state.activePlay):tt("received play completed, but it does not match active play",t,this.state.activePlay)},_i.prototype._onPlaysExhausted=function(){this.state.paused=!1},_i.prototype._onPrepareSound=function(t){tt("preparing",t),this.speaker.prepare(t)},_i.prototype.isPaused=function(){return this.session.isTuned()&&this.state.paused},_i.prototype.getStationInformation=function(t){return this.session.getStationInformation(t)},_i.prototype.tune=function(){this.session.isTuned()||this.session.tune()},_i.prototype.play=function(){var t=this.session,e=this.state;if(!t.isTuned())return e.paused=!1,t.tune();t.getActivePlay()&&e.activePlay&&e.paused?e.activePlay.playStarted?e.activePlay.sound.resume():e.activePlay.sound.play():e.paused=!1},_i.prototype.pause=function(){this.session.hasActivePlayStarted()&&this.state.activePlay&&!this.state.paused&&this.state.activePlay.sound.pause()},_i.prototype.like=function(){this.session.hasActivePlayStarted()&&(this.session.likePlay(this.state.activePlay.id),this.trigger("play-liked"))},_i.prototype.unlike=function(){this.session.hasActivePlayStarted()&&(this.session.unlikePlay(this.state.activePlay.id),this.trigger("play-unliked"))},_i.prototype.dislike=function(){this.session.hasActivePlayStarted()&&(this.session.dislikePlay(this.state.activePlay.id),this.trigger("play-disliked"),this.state.paused=!1,this.skip())},_i.prototype.skip=function(){this.session.hasActivePlayStarted()&&(this.state.paused=!1,this.session.requestSkip())},_i.prototype.destroy=function(){this.session=null,this.state.activePlay&&this.state.activePlay.sound&&this.state.activePlay.sound.destroy()},_i.prototype.getCurrentState=function(){return this.state.suspended?"suspended":this.session.hasActivePlayStarted()?this.state.paused?"paused":"playing":"idle"},_i.prototype.getPosition=function(){return this.state.activePlay&&this.state.activePlay.sound?this.state.activePlay.sound.position():0},_i.prototype.getDuration=function(){return this.state.activePlay&&this.state.activePlay.sound?this.state.activePlay.sound.duration():0},_i.prototype.maybeCanSkip=function(){return this.session.maybeCanSkip()};var bi="muted";_i.prototype.isMuted=function(){return!!(mi()&&bi in localStorage)&&"true"===localStorage[bi]},_i.prototype.setMuted=function(t){t?(this.speaker.setVolume(0),mi()&&(localStorage[bi]=!0),this.trigger("muted")):(this.speaker.setVolume(100),mi()&&(localStorage[bi]=!1),this.trigger("unmuted"))};var Pi={f:ut},Si=l.f,ki=function(t){var e=g.Symbol||(g.Symbol=y.Symbol||{});"_"==t.charAt(0)||t in e||Si(e,t,{value:Pi.f(t)})};ki("asyncIterator");var wi=t(function(t){var n=m("meta"),e=l.f,i=0,r=Object.isExtensible||function(){return!0},o=!u(function(){return r(Object.preventExtensions({}))}),s=function(t){e(t,n,{value:{i:"O"+ ++i,w:{}}})},a=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!c(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!f(t,n)){if(!r(t))return"F";if(!e)return"E";s(t)}return t[n].i},getWeak:function(t,e){if(!f(t,n)){if(!r(t))return!0;if(!e)return!1;s(t)}return t[n].w},onFreeze:function(t){return o&&a.NEED&&r(t)&&!f(t,n)&&s(t),t}}}),Oi=(wi.KEY,wi.NEED,wi.fastKey,wi.getWeak,wi.onFreeze,be.f),xi={}.toString,Ei="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ai={f:function(t){return Ei&&"[object Window]"==xi.call(t)?function(t){try{return Oi(t)}catch(t){return Ei.slice()}}(t):Oi(C(t))}},Ii=wi.KEY,Ti=ge.f,ji=l.f,Ci=Ai.f,Li=y.Symbol,qi=y.JSON,Ri=qi&&qi.stringify,Mi="prototype",Ni=ut("_hidden"),Bi=ut("toPrimitive"),Fi={}.propertyIsEnumerable,Di=D("symbol-registry"),Ui=D("symbols"),Vi=D("op-symbols"),Hi=Object[Mi],Wi="function"==typeof Li,zi=y.QObject,Gi=!zi||!zi[Mi]||!zi[Mi].findChild,Ji=i&&u(function(){return 7!=wt(ji({},"a",{get:function(){return ji(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=Ti(Hi,e);i&&delete Hi[e],ji(t,e,n),i&&t!==Hi&&ji(Hi,e,i)}:ji,$i=function(t){var e=Ui[t]=wt(Li[Mi]);return e._k=t,e},Ki=Wi&&"symbol"==typeof Li.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Li},Yi=function(t,e,n){return t===Hi&&Yi(Vi,e,n),v(t),e=s(e,!0),v(n),f(Ui,e)?(n.enumerable?(f(t,Ni)&&t[Ni][e]&&(t[Ni][e]=!1),n=wt(n,{enumerable:S(0,!1)})):(f(t,Ni)||ji(t,Ni,S(1,{})),t[Ni][e]=!0),Ji(t,e,n)):ji(t,e,n)},Qi=function(t,e){v(t);for(var n,i=function(t){var e=J(t),n=$.f;if(n)for(var i,r=n(t),o=K.f,s=0;r.length>s;)o.call(t,i=r[s++])&&e.push(i);return e}(e=C(e)),r=0,o=i.length;r<o;)Yi(t,n=i[r++],e[n]);return t},Xi=function(t){var e=Fi.call(this,t=s(t,!0));return!(this===Hi&&f(Ui,t)&&!f(Vi,t))&&(!(e||!f(this,t)||!f(Ui,t)||f(this,Ni)&&this[Ni][t])||e)},Zi=function(t,e){if(t=C(t),e=s(e,!0),t!==Hi||!f(Ui,e)||f(Vi,e)){var n=Ti(t,e);return!n||!f(Ui,e)||f(t,Ni)&&t[Ni][e]||(n.enumerable=!0),n}},tr=function(t){for(var e,n=Ci(C(t)),i=[],r=0;n.length>r;)f(Ui,e=n[r++])||e==Ni||e==Ii||i.push(e);return i},er=function(t){for(var e,n=t===Hi,i=Ci(n?Vi:C(t)),r=[],o=0;i.length>o;)!f(Ui,e=i[o++])||n&&!f(Hi,e)||r.push(Ui[e]);return r};Wi||(w((Li=function(){if(this instanceof Li)throw TypeError("Symbol is not a constructor!");var e=m(0<arguments.length?arguments[0]:void 0),n=function(t){this===Hi&&n.call(Vi,t),f(this,Ni)&&f(this[Ni],e)&&(this[Ni][e]=!1),Ji(this,e,S(1,t))};return i&&Gi&&Ji(Hi,e,{configurable:!0,set:n}),$i(e)})[Mi],"toString",function(){return this._k}),ge.f=Zi,l.f=Yi,be.f=Ai.f=tr,K.f=Xi,$.f=er,i&&w(Hi,"propertyIsEnumerable",Xi,!0),Pi.f=function(t){return $i(ut(t))}),E(E.G+E.W+E.F*!Wi,{Symbol:Li});for(var nr="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ir=0;nr.length>ir;)ut(nr[ir++]);for(var rr=J(ut.store),or=0;rr.length>or;)ki(rr[or++]);E(E.S+E.F*!Wi,"Symbol",{for:function(t){return f(Di,t+="")?Di[t]:Di[t]=Li(t)},keyFor:function(t){if(!Ki(t))throw TypeError(t+" is not a symbol!");for(var e in Di)if(Di[e]===t)return e},useSetter:function(){Gi=!0},useSimple:function(){Gi=!1}}),E(E.S+E.F*!Wi,"Object",{create:function(t,e){return void 0===e?wt(t):Qi(wt(t),e)},defineProperty:Yi,defineProperties:Qi,getOwnPropertyDescriptor:Zi,getOwnPropertyNames:tr,getOwnPropertySymbols:er}),qi&&E(E.S+E.F*(!Wi||u(function(){var t=Li();return"[null]"!=Ri([t])||"{}"!=Ri({a:t})||"{}"!=Ri(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(c(e)||void 0!==t)&&!Ki(t))return le(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Ki(e))return e}),i[1]=e,Ri.apply(qi,i)}}),Li[Mi][Bi]||k(Li[Mi],Bi,Li[Mi].valueOf),Et(Li,"Symbol"),Et(Math,"Math",!0),Et(y.JSON,"JSON",!0),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var n=0;n<this.length;n++)t.call(e,this[n],n,this)});var sr=function(t,e){var n=this;this.id=t,this.alertId=null,this.durationId=null,this.startedPlayback=!1,this.$el=document.getElementById(t),this.player=e,this.player.on("placement",this._onPlacement,this),this.player.on("play-started",this._onPlayStarted,this),this.player.on("play-paused",this._onPlayPaused,this),this.player.on("play-resumed",this._onPlayResumed,this),this.player.on("play-completed",this._onPlayCompleted,this),this.player.on("play-liked",this._onPlayLiked,this),this.player.on("play-unliked",this._onPlayUnliked,this),this.player.on("play-disliked",this._onPlayDisliked,this),this.player.on("plays-exhausted",this._onPlaysExhausted,this),this.player.on("skip-denied",this._onSkipDenied,this),this.player.on("suspend",this._onSuspend,this),this._enableButtonsBasedOnState(),this.displayText=this.originalDisplayText=document.querySelector(".status").innerHTML,this.renderStatus(),document.querySelectorAll(".status").forEach(function(t){t.addEventListener("click",n._onStatusClick.bind(n))}),document.querySelectorAll(".play-button, .start-button, .resume-button").forEach(function(t){t.addEventListener("click",n._onPlayButtonClick.bind(n))}),document.querySelectorAll(".pause-button").forEach(function(t){t.addEventListener("click",n._onPauseButtonClick.bind(n))}),document.querySelectorAll(".skip-button").forEach(function(t){t.addEventListener("click",n._onSkipButtonClick.bind(n))}),document.querySelectorAll(".like-button").forEach(function(t){t.addEventListener("click",n._onLikeButtonClick.bind(n))}),document.querySelectorAll(".dislike-button").forEach(function(t){t.addEventListener("click",n._onDislikeButtonClick.bind(n))})};function ar(t){var e=Math.floor(t/1e3),n=e%60;return n<10&&(n="0"+n),Math.floor(e/60)+":"+n}return sr.prototype._onStatusClick=function(){"playing"===this.player.getCurrentState()?this._onPauseButtonClick():this._onPlayButtonClick()},sr.prototype._onPlayButtonClick=function(){this.player.initializeAudio(),this.player.play()},sr.prototype._onPauseButtonClick=function(){this.player.pause()},sr.prototype._onSkipButtonClick=function(){this.player.skip()},sr.prototype._onLikeButtonClick=function(t){tt("like button clicked!",t.target,this),t.target.classList.contains("liked")?this.player.unlike():this.player.like()},sr.prototype._onDislikeButtonClick=function(){this.player.dislike()},sr.prototype.$=function(t){return this.$el.find(t)},sr.prototype._onPlacement=function(t){this.originalDisplayText||(this.originalDisplayText=this.formatPlacement(t),this.renderStatus(this.originalDisplayText))},sr.prototype.formatPlacement=function(t){return"Tune in to <em class='placement'>"+t.name+"</em>"},sr.prototype._onPlayStarted=function(t){this.startedPlayback=!0,this.renderStatus(this.formatPlay(t)),this._enableButtonsBasedOnState(),this._setLikeStatus(t.liked),this._enablePositionTracker()},sr.prototype._enablePositionTracker=function(){var t=this;this.durationId||(this.durationId=window.setInterval(function(){t.renderPosition(t.player.getPosition(),t.player.getDuration())},500))},sr.prototype._setLikeStatus=function(t){var e=document.querySelectorAll(".like-button"),n=document.querySelectorAll(".dislike-button");!0===t?(e.forEach(function(t){t.classList.add("liked")}),n.forEach(function(t){t.classList.remove("disliked")})):!1===t?(e.forEach(function(t){t.classList.remove("liked")}),n.forEach(function(t){t.classList.add("disliked")})):(e.forEach(function(t){t.classList.remove("liked")}),n.forEach(function(t){t.classList.remove("disliked")}))},sr.prototype._disablePositionTracker=function(){this.durationId&&(window.clearInterval(this.durationId),this.durationId=null)},sr.prototype._onPlayResumed=function(){this._enablePositionTracker(),this._enableButtonsBasedOnState()},sr.prototype._onPlayPaused=function(){this._disablePositionTracker(),this._enableButtonsBasedOnState()},sr.prototype._onPlayCompleted=function(){this.renderPosition(0,0),this._enableButtonsBasedOnState()},sr.prototype._onPlaysExhausted=function(){this.renderStatus(this.originalDisplayText),this.renderAlert("There is no more music to play in this station!"),this._enableButtonsBasedOnState()},sr.prototype._onPlayLiked=function(){this._setLikeStatus(!0)},sr.prototype._onPlayDisliked=function(){this._setLikeStatus(!1)},sr.prototype._onPlayUnliked=function(){this._setLikeStatus()},sr.prototype._onSkipDenied=function(){this.renderAlert("Sorry you've temporarily run out of skips!")},sr.prototype.formatPlay=function(t){return"<span class='track'>"+t.audio_file.track.title+"</span> by <span class='artist'>"+t.audio_file.artist.name+"</span> on <span class='release'>"+t.audio_file.release.title+"</span>"},sr.prototype.renderStatus=function(t){var e=this;void 0!==t&&(this.displayText=t),this.alertId||document.querySelectorAll(".status").forEach(function(t){t.innerHTML=e.displayText,t.classList.remove("alert")})},sr.prototype.renderPosition=function(e,n){if(document.querySelectorAll(".elapsed").forEach(function(t){t.innerHTML=ar(e)}),document.querySelectorAll(".duration").forEach(function(t){t.innerHTML=ar(n)}),0===n)document.querySelectorAll(".progress").forEach(function(t){t.style.width="0"});else{var i=Math.round((e+1e3)/n*100);i=100<i?100:i,document.querySelectorAll(".progress").forEach(function(t){t.style.width=i+"%"})}},sr.prototype.renderAlert=function(e){this.alertId&&window.clearTimeout(this.alertId),document.querySelectorAll(".status").forEach(function(t){t.innerHTML=e,t.classList.add("alert")});var t=this;this.alertId=window.setTimeout(function(){t.alertId=null,t.renderStatus()},3e3)},sr.prototype._onSuspend=function(){this._enableButtonsBasedOnState()},sr.prototype._enableButtonsBasedOnState=function(){var t,e,n=this.player.getCurrentState();switch(n){case"playing":t=[".pause-button",".like-button",".dislike-button"],e=[".play-button",".start-button",".resume-button"],this.player.maybeCanSkip()?t.push(".skip-button"):e.push(".skip-button");break;case"paused":t=[".play-button",".resume-button",".like-button",".dislike-button"],e=[".pause-button",".start-button"],this.player.maybeCanSkip()?t.push(".skip-button"):e.push(".skip-button");break;case"suspended":t=[],e=[".play-button",".resume-button",".like-button",".dislike-button",".pause-button",".start-button",".skip-button"];break;default:t=[".play-button",".start-button"],e=[".resume-button",".pause-button",".like-button",".dislike-button",".skip-button"]}var i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var u=s.value;document.querySelectorAll(u).forEach(function(t){t.classList.remove("button-enabled"),t.classList.add("button-disabled"),t.disabled=!0})}}catch(t){r=!0,o=t}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}var c=!0,l=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var h=f.value;document.querySelectorAll(h).forEach(function(t){t.classList.remove("button-disabled"),t.classList.add("button-enabled"),t.disabled=!1})}}catch(t){l=!0,d=t}finally{try{c||null==p.return||p.return()}finally{if(l)throw d}}var y=this.$el.classList;y.remove("state-playing"),y.remove("state-paused"),y.remove("state-idle"),y.remove("state-suspended"),y.add("state-"+n)},{Speaker:tn,Session:gi,Player:_i,PlayerView:sr,log:tt,version:on}}();
